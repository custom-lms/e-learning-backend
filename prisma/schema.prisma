enum SubjectType {
  CORE
  ELECTIVE
}

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Class {
  id     Int     @id @default(autoincrement())
  name   String  @unique
  boards Board[]
  orders Order[]
}

model Board {
  id       Int       @id @default(autoincrement())
  name     String
  classId  Int
  class    Class     @relation(fields: [classId], references: [id], onDelete: Cascade)
  subjects Subject[]
  orders   Order[]
}

model Subject {
  id          String      @id @default(uuid())
  name        String
  boardId     Int
  board       Board       @relation(fields: [boardId], references: [id], onDelete: Cascade)
  language    String // 'Assamese' or 'English'
  chapters    Chapter[]
  subjectType SubjectType @default(CORE) // add default if needed
}

model Chapter {
  id        String  @id @default(uuid())
  name      String
  subjectId String
  subject   Subject @relation(fields: [subjectId], references: [id], onDelete: Cascade)
  topics    Topic[]
}

model Topic {
  id           String  @id @default(uuid())
  name         String
  videoUrl     String // Store S3 URL of the video
  thumbnailUrl String // Store S3 URL of the thumbnail
  description  String
  chapterId    String
  chapter      Chapter @relation(fields: [chapterId], references: [id], onDelete: Cascade)
}

model User {
  id        String   @id @default(uuid())
  name      String
  email     String   @unique
  password  String? // optional password
  role      Role     @default(STUDENT)
  createdAt DateTime @default(now())
}

enum Role {
  SUPERADMIN
  ADMIN
  STUDENT
}

model Order {
  id                Int      @id @default(autoincrement())
  classId           Int
  boardId           Int?
  class             Class    @relation(fields: [classId], references: [id])
  board             Board?   @relation(fields: [boardId], references: [id])
  fullName          String
  email             String?
  mobile            String
  pincode           String
  school            String?
  electiveIds       String // Comma-separated or use a relation if needed
  status            String   @default("PENDING")
  paymentMode       String? // e.g., RAZORPAY, UPI
  razorpayPaymentId String?
  createdAt         DateTime @default(now())
}

enum OrderStatus {
  PENDING
  COMPLETED
  CANCELLED
}

enum PaymentMode {
  UPI
  CARD
  NETBANKING
  WALLET
  COD
}
